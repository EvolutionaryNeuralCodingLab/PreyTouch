<form class="col-md-5" id="experiment_form">
    <h4>Start Experiment</h4>
<!--    <div class="form-group row pr-3">-->
<!--        <label for="experimentName" class="col col-form-label">Experiment Name</label>-->
<!--        <div class="col-sm-7">-->
<!--            <input type="text" class="form-control" id="experimentName" value="{{experiment_name}}"-->
<!--                   required>-->
<!--        </div>-->
<!--    </div>-->
    <div class="form-group row pr-3">
        <label for="animalId" class="col col-form-label">Pogona ID</label>
        <div class="col-sm-5">
            <input type="text" class="form-control" id="animalId" required>
        </div>
    </div>
    <div class="form-group row pr-3">
        <label for="numBlocks" class="col col-form-label">Number of Blocks</label>
        <div class="col-sm-5">
            <input type="number" class="form-control" id="numBlocks" value="1" required>
        </div>
    </div>
    <div class="form-group row pr-3" id="timeBetweenBlocksDiv">
        <label for="timeBetweenBlocks" class="col col-form-label">Time Between Blocks [seconds]</label>
        <div class="col-sm-5">
            <input type="number" class="form-control" id="timeBetweenBlocks" value="180" required>
        </div>
    </div>
    <div class="form-group row pr-3">
        <label for="extraTimeRecording" class="col col-form-label">Extra Time Recording</label>
        <div class="col-sm-5">
            <input type="number" class="form-control" id="extraTimeRecording" value="{{extra_time_recording}}" required>
        </div>
    </div>

    <div id="accordion">
        {% for i in range(1, 20) %}
        <div class="card" id="block{{i}}">
            <div class="card-header" id="heading{{i}}">
                <h5 class="mb-0">
                    <button class="btn btn-default collapsed" data-toggle="collapse" data-target="#collapse{{i}}"
                            aria-expanded="true" type="button" aria-controls="collapse{{i}}">
                        Block #{{i}}
                    </button>
                </h5>
            </div>
            <div id="collapse{{i}}" class="collapse in" aria-labelledby="heading{{i}}" data-parent="#accordion">
                <div class="card-body">
                    <div class="form-group row pr-3">
                        <label for="experimentNumTrials{{i}}" class="col col-form-label">Number of Trials</label>
                        <div class="col-sm-5">
                            <input type="number" class="form-control" id="experimentNumTrials{{i}}" value="5" required>
                        </div>
                    </div>
                    <div class="form-group row pr-3">
                        <label for="experimentTrialDuration{{i}}" class="col col-form-label">Trial Duration
                            [sec]</label>
                        <div class="col-sm-5">
                            <input type="number" class="form-control" id="experimentTrialDuration{{i}}" value="40"
                                   required>
                        </div>
                    </div>
                    <div class="form-group row pr-3">
                        <label for="experimentITI{{i}}" class="col col-form-label">Inter Trial Interval [sec]</label>
                        <div class="col-sm-5">
                            <input type="number" class="form-control" id="experimentITI{{i}}" value="20" required>
                        </div>
                    </div>
                    <div class="form-group row pr-3">
                        <label for="blockTypeSelect{{i}}" class="col col-form-label">Block Type</label>
                        <div class="col">
                            <select id="blockTypeSelect{{i}}" class="form-control col">
                                {% for experiment_type in experiment_types %}
                                <option value="{{experiment_type}}">{{experiment_type}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-group row pr-3 bugs-options{{i}}">
                        <label for="bugTypeSelect{{i}}" class="col col-form-label">Bug Type</label>
                        <div class="col">
                            <select id="bugTypeSelect{{i}}" class="form-control col" multiple="multiple"
                                    style="display: none;">
                                {% for bugType in config.get('bugTypes', {}).keys() %}
                                <option value="{{bugType}}">{{bugType}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-group row pr-3 bugs-options{{i}}" id="rewardBugDiv{{i}}" style="display: none">
                        <label for="rewardBugSelect{{i}}" class="col col-form-label">Reward Bug</label>
                        <div class="col">
                            <select id="rewardBugSelect{{i}}" class="form-control col" multiple="multiple"
                                    style="display: none;">
                            </select>
                        </div>
                    </div>
                    <div class="form-group row pr-3 bugs-options{{i}}">
                        <label for="rewardAnyTouchProb{{i}}" class="col col-form-label">Any Touch Reward Probability</label>
                        <div class="col-sm-5">
                            <input type="number" step=0.01 max=1 min=0 class="form-control" id="rewardAnyTouchProb{{i}}" value="0" required>
                        </div>
                    </div>
                    <div class="form-group row pr-3 bugs-options{{i}}" id="exitHolePosition{{i}}">
                        <label for="exitHolePositionSelect{{i}}" class="col col-form-label">Exit Hole Position</label>
                        <div class="col">
                            <select id="exitHolePositionSelect{{i}}" class="form-control col">
                                {% for val, label in config.get('holePositions', {}).items() %}
                                <option value="{{val}}">{{label}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
<!--                    <div class="form-group row pr-3 bugs-options{{i}}">-->
<!--                        <label for="rewardTypeSelect{{i}}" class="col col-form-label">Reward Type</label>-->
<!--                        <div class="col">-->
<!--                            <select id="rewardTypeSelect{{i}}" class="form-control col">-->
<!--                                {% for reward_type in reward_types %}-->
<!--                                <option value="{{reward_type}}">{{reward_type}}</option>-->
<!--                                {% endfor %}-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="form-group row pr-3 bugs-options{{i}}">-->
<!--                        <label for="movementTypeSelect{{i}}" class="col col-form-label">Movement Type</label>-->
<!--                        <div class="col">-->
<!--                            <select id="movementTypeSelect{{i}}" class="form-control col">-->
<!--                                {% for movementType in config.get('movementTypes', []) %}-->
<!--                                <option value="{{movementType}}">{{movementType}}</option>-->
<!--                                {% endfor %}-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="form-group row pr-3 bugs-options{{i}}" id="targetDrift{{i}}" style="display: none;">-->
<!--                        <label for="targetDriftSelect{{i}}" class="col col-form-label">Target Drift</label>-->
<!--                        <div class="col">-->
<!--                            <select id="targetDriftSelect{{i}}" class="form-control col">-->
<!--                                {% for targetDrift in config.get('targetDrifts', []) %}-->
<!--                                <option value="{{targetDrift}}">{{targetDrift}}</option>-->
<!--                                {% endfor %}-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="form-group row pr-3 bugs-options{{i}}" id="bugHeightDiv{{i}}" style="display: none;">-->
<!--                        <label for="bugHeight{{i}}" class="col col-form-label">Bug Height:</label>-->
<!--                        <div class="col-sm-5">-->
<!--                            <input type="number" class="form-control" id="bugHeight{{i}}" value="200">-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="form-group row pr-3 bugs-options{{i}}" id="isAntiClockWiseDiv{{i}}"-->
<!--                         style="display: none;">-->
<!--                        <label for="isAntiClockWise{{i}}" class="col col-form-label">Anticlockwise Circle</label>-->
<!--                        <div class="col-sm-5">-->
<!--                            <input id="isAntiClockWise{{i}}" type="checkbox" class="form-control-sm">-->
<!--                        </div>-->
<!--                    </div>-->
                    <div class="form-group row pr-3 bugs-options{{i}}">
                        <label for="bugSpeed{{i}}" class="col col-form-label">Bug Speed [cm/s]</label>
                        <div class="col-sm-5">
                            <input type="number" class="form-control" id="bugSpeed{{i}}" value="4">
                        </div>
                    </div >
                    <div class="form-group row pr-3 bugs-options{{i}}" id="backgroundColorDiv{{i}}">
                        <label for="backgroundColor{{i}}" class="col col-form-label">Background Color</label>
                        <div class="col-sm-5">
                            <input type="color" class="form-control" id="backgroundColor{{i}}" value="#e8eaf6">
                        </div>
                    </div>
                    <div class="row ml-4 mt-3 form-group row pr-3 bugs-options{{i}}">
                        <input class="form-check-input" type="checkbox" id="isDefaultBugSize{{i}}" checked>
                        <label class="form-check-label" for="isDefaultBugSize{{i}}">Use Default Bug Sizes</label>
                    </div>
                    <div class="form-group row pr-3 bugs-options{{i}}" id="bugSizeDiv{{i}}" style="display: none;">
                        <label for="bugSize{{i}}" class="col col-form-label">Bug Size:</label>
                        <div class="col-sm-5">
                            <input type="number" class="form-control" id="bugSize{{i}}" min="50" max="250">
                        </div>
                    </div>

                    <div class="form-group row pr-3 media-options{{i}}" style="display: none">
                        <label for="media-url{{i}}" class="col col-form-label">Media File:</label>
                        <div class="col">
                            <select id="media-url{{i}}" class="form-control col">
                                {% for mediaFile in media_files %}
                                <option value="{{mediaFile}}">{{mediaFile}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="row mt-3">
        <div class="col">
            <button id="startExperimentButton" type="submit" class="btn btn-primary mr-1">Start</button>
            <button id="stopExperiment" type="button" class="btn btn-outline-danger mr-3">Stop Experiment</button>
            <button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#saveExperimentModal">
                Save
            </button>
            <button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#loadExperimentModal">
                Load
            </button>
        </div>
    </div>

    <div style="margin-top: 1em; margin-left: 1em" class="row">
        <div class="col">
            <div class="row" id="currentExperimentName"></div>
            <div class="row" id="currentBlockID"></div>
            <div class="row" id="openAppHostDiv"></div>
            <div class="row" id="temperatureValue"></div>
            <div class="row" id="gpuMetric"></div>
            <div class="row" id="cpuMetric"></div>
            <div class="row" id="memMetric"></div>
        </div>
        <div class="col">
            <pre class="row" id="procCPU"></pre>
        </div>
    </div>

</form>

<!-- Load Experiment -->
<div class="modal fade" id="loadExperimentModal" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loadModalLabel">Load Experiment</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Please select experiment</p>
                <select id="cachedExperimentsSelect" class="form-control col">
                    {% for exp in cached_experiments %}
                    <option value="{{exp}}">{{exp}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button id="loadExperiment" type="button" class="btn btn-primary">Load</button>
            </div>
        </div>
    </div>
</div>

<!-- Save Experiment -->
<div class="modal fade" id="saveExperimentModal" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="saveModalLabel">Save Experiment</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form>
                <div class="modal-body">
                    <label for="saveExperimentName">Please enter name for saved experiment</label>
                    <input type="text" class="form-control" id="saveExperimentName" required />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button id="saveExperiment" type="button" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>